<!doctype html>
<head>
	<style>
		html,body{
			height:100%;
			width:100%;
		}
		#test1{
			display:block;
		}
	</style>
	<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js'></script>
</head>

<body>

<canvas id="test1" width="500" height="500">

</canvas>

</body>
<script type="text/javascript">
function draw() {

	var boxesCanvas = document.getElementById("test1");
	if (boxesCanvas.getContext) {
		var ctx = boxesCanvas.getContext("2d");
		var h = $("#test1").height();
		var w = $("#test1").width();
		
		var color1 = '#73607b';
		var color2 = '#b9a4c1';
		ctx.fillStyle = color1;
		ctx.lineWidth = 1;
		ctx.strokeStyle = color2;

		for ( i=0; i<=500; i++ ) {
		  //randomize values for placement and size
		  var x = Math.random()*w;
		  var y = Math.random()*h;
		  var s = 10+Math.random()*Math.random()*Math.random()*100;
		  var theta = Math.random()*3.14;

		  // render boxes on the left
		  ctx.save();
			var x1 = x-w/2;
			var y1 = y-h/2;
			ctx.translate( x1, y1);
			ctx.rotate(theta);
			ctx.translate(-s/2, -s/2);
			ctx.fillRect(0,0,s,s);
			ctx.strokeRect(0,0,s,s);
		  ctx.restore();

		  // render the same boxes on the right, so it repeats
		  ctx.save();
			var x2 = x+w/2;
			ctx.translate( x2, y1);
			ctx.rotate(theta);
			ctx.translate(-s/2, -s/2);
			ctx.fillRect(0,0,s,s);
			ctx.strokeRect(0,0,s,s);
		  ctx.restore();
		  // render same box on the top so it repeats
		  ctx.save();
			var x1 = x-w/2;
			var y2 = y+h/2;
			ctx.translate( x1, y2);
			ctx.rotate(theta);
			ctx.translate(-s/2, -s/2);
			ctx.fillRect(0,0,s,s);
			ctx.strokeRect(0,0,s,s);
		  ctx.restore();
		  ctx.save();
			var x2 = x+w/2;
			var y2 = y+h/2;
			ctx.translate( x2, y2);
			ctx.rotate(theta);
			ctx.translate(-s/2, -s/2);
			ctx.fillRect(0,0,s,s);
			ctx.strokeRect(0,0,s,s);
		  ctx.restore();
		}
	}
}

$(document).ready(function(){
	//$("#test1").attr("width", $(window).width());
	//$("#test1").attr("height", $(window).height());
	//setTimeout(draw,500);
	draw();
});

draw();
</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-26321085-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</html>